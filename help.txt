h1. rah_comment_spam

p. Rah_comment_spam ships with customizable anti-spam tools. Set minimum and maximum message lenght, filter spam words, validate email addresses, limit posting activity and set hidden spam traps. Toggle spam prevention method between block, moderate or mark as spam. All from simple interface, no head first dive to code.

* Version: 0.5
* Updated: 2010/09/15 4:20 AM UTC

h3. Table of Contents

* "List of features":#list-of-features
* "Requirements":#requirements
* "Installation and usage":#installation-and-usage
* "Changelog":#changelog

h3(#list-of-features). List of features

* Set comment message lenght limitations: minimum and maximum, words and characters.
* Limit link posting.
* Define spam words, and set the limit how many spam words are needed untill comment becomes spam.
* Show customizable error messages when comment is blocked.
* Set a custom hidden spam trap field.
* Change the spam protection method.
* Comment posting limit per set of time.
* Comes with simple preferences interface; no diving into code needed at all.

h3(#requirements). Requirements

p. Rah_comment_spam's minimum requirements:

* Textpattern 4.0.7+

p. Recommended:

* Textpattern 4.2.0+
* jQuery for the admin panel (included with Textpattern).

h3(#installation-and-usage). Installation and usage

# Navigate to your Textpattern installation's Plugin panel (_Textpattern / Admin / Plugins_).
# Paste rah_comment_spam's plugin code to the plugin installer textarea and run the automated setup.
# After the setup is completed, activate the plugin and you're set.
# You can customize the plugin's settings in the plugin's panel: _Textpattern / Extensions / Comment antispam_.

h3(#changelog). Changelog

p. *Version 0.5*

* Added option to check the time the user used to write the comment and block instant posters. "As discussed here":http://forum.textpattern.com/viewtopic.php?id=34535.
* Removed unused HTML field ids and sizes from the backend pane.

p. *Version 0.4*

* Added: now also filters @https://@, @ftp://@ and @ftps://@ protocols, not just links starting with @http://@.
* Changed posting limit feature's maximum post setting from _"more than"_ to _"equals or more than"_. Setting the value to zero/or leaving it empty will disable the feature.
* Changed filtering method from _and_ to _or_. This means, when the comment gots flagged by a filter for the first time, the spam filtering process ends instead going thru all the checks which are no longer needed. Gives slight performance boost.
* From version 0.4 onwards requires TXP 4.0.7 or newer.
* Now posting limits are counted barely by MySQL. No involment of PHP.
* Merged @rah_comment_spam_urlcount()@ and @rah_comment_spam_spamwords()@.
* Now admin panel uses same type of sliding panels as seen in "rah_sitemap":http://rahforum.biz/plugins/rah_sitemap.

p. *Version 0.3*

* Added email DNS validation.

p. *Version 0.2.1*

* Made writing spam defition list less strict. Now allows double commas, spaces and so on. "Thanks Robert.":http://forum.textpattern.com/viewtopic.php?pid=212943#p212943

p. *Version 0.2*

* Added user based time relative posting limit.
* Fixed hidden spamtrap input's escaping.
* Improved comment posting evaluating speed.
* Merged install, save, update and fetch arrays.
* Improved installation script.
* Merged SQL queries.

p. *Version 0.1.3*

* Fixed forgotten @strtolower()@.

p. *Version 0.1.2*

* Removed typo from admin panel: "Documention" to "Documentation".

p. *Version 0.1*

* First release